{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}My Site{% endblock %}</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="{% static 'css/cart.css' %}">

</head>
<body class="bg-gray-100">

    <!-- Navbar -->
    <nav class="bg-gray-800 text-white py-3 px-4 flex items-center justify-between">
        <!-- Logo / Brand -->
        <a class="font-bold text-xl tracking-tight" href="{% url 'home' %}">My Site</a>

        <!-- Search bar -->
        <div class="relative w-full max-w-xl mx-4">
            <form method="GET" action="{% url 'home' %}">
                <input type="text" name="q"
                       class="w-full border h-12 shadow px-4 rounded-full text-gray-800 dark:border-gray-700 dark:bg-gray-200"
                       placeholder="Search...">
                <button type="submit" class="absolute top-3.5 right-3 text-teal-400">
                    <svg class="w-5 h-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56.966 56.966">
                        <path d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786
                                 c0-12.682-10.318-23-23-23s-23,10.318-23,23s10.318,23,23,23
                                 c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208
                                 c0.571,0.593,1.339,0.92,2.162,0.92
                                 c0.779,0,1.518-0.297,2.079-0.837
                                 C56.255,54.982,56.293,53.08,55.146,51.887z 
                                 M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17
                                 s-17-7.626-17-17S14.61,6,23.984,6z"/>
                    </svg>
                </button>
            </form>
        </div>

        <!-- Cart icon and navigation links -->
        <div class="flex items-center space-x-4">
            <!-- Cart -->
            <a href="{% url 'cart' %}" class="relative">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293
                             c-.63.63-.184 1.707.707 1.707H17
                             m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>
                </svg>
                {% if cart_count %}
                    <span class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-xs
                                 flex items-center justify-center text-white">
                        {{ cart_count }}
                    </span>
                {% endif %}
            </a>

            <!-- Nav links -->
            <a class="text-sm px-4 py-2 rounded-full hover:bg-gray-700" href="{% url 'home' %}">Home</a>
            <a class="text-sm px-4 py-2 rounded-full hover:bg-gray-700" href="{% url 'about' %}">About</a>
            <a class="text-sm px-4 py-2 rounded-full hover:bg-gray-700" href="{% url 'contact' %}">Contact</a>

            <!-- Login / Logout -->
            {% if user.is_authenticated %}
                <form method="POST" action="{% url 'logout' %}">
                    {% csrf_token %}
                    <button type="submit"
                            class="text-sm px-4 py-2 rounded-full hover:bg-gray-700 text-red-400">
                        Logout
                    </button>
                </form>
            {% else %}
                <a class="text-sm px-4 py-2 rounded-full hover:bg-gray-700" href="{% url 'login' %}">
                    Login
                </a>
            {% endif %}
        </div>
    </nav>

    <!-- Page content -->
    <main class="p-4">
        {% block content %}{% endblock %}
    </main>

</body>
</html>
